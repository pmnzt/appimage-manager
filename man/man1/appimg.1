.TH "appimg" 1 "December 2025" "0.2.0" "appimg man page"
.SH NAME
appimg - manage AppImages
.SH SYNOPSIS
appimg [COMMAND] [OPTIONS] [ARGS]
.SH DESCRIPTION
A script to manage, organize, and register AppImage files under
.BR ~/.appimages .

AppImages are organized into two major categories:
.RS
.TP
.B managed/
Contains AppImages that have been organized and registered by appimg.
Each AppImage has its own subdirectory, named after its desktop-file ID.
.TP
.B unmanaged/
Contains AppImages that are newly discovered, reset from managed/, or moved without an update.
.RE

Generated launchers are symlinked into:
.PP
    ~/.local/share/applications/

You may provide a custom icon by placing an icon file (e.g. icon.png, icon.svg)
in a managed application folder and running:
.PP
    appimg update [APPNAME]

If no icon exists, placeholder-icon.png is used.

.SH COMMANDS

.TP
\fBls\fR
List AppImage files. By default searches the user’s home directory.
.RS
.PP
\fBUSAGE:\fR
.B appimg ls [OPTIONS]
.PP
\fBOPTIONS:\fR
.TP
\fB-s DIR\fR
Specify a directory to search.
.PP
\fBOUTPUT:\fR
Prints each AppImage with full path.
.PP
\fBNOTES:\fR
File extension matching is case-insensitive (.AppImage, .appimage).
.RE

.TP
\fBmove\fR
Move AppImage files into ~/.appimages/managed/, placing each AppImage into
its own directory derived from the embedded desktop file ID.
.RS
.PP
\fBUSAGE:\fR
.B appimg move [OPTIONS] [PATH]
.PP
\fBOPTIONS:\fR
.TP
\fB-s DIR\fR
Directory to search for AppImages. Defaults to $HOME if --all is used without PATH.
.TP
\fB--all\fR
Move all AppImages found in the search scope.
.PP
\fBBEHAVIOR:\fR
Creates ~/.appimages, managed/, and unmanaged/ if missing.
.br
For each AppImage:
.RS
.IP • 2
Extract the embedded .desktop file to determine the application ID.
.IP •
Create ~/.appimages/managed/<APPID>/.
.IP •
Move the AppImage there and rename it to <APPID>.AppImage.
.RE
.PP
\fBMultiple versions and #active priority:\fR
.RS
.IP • 2
If multiple AppImages share the same ID:
.RS
.IP 1. 4
If any filename includes "#active", the *first encountered* "#active" AppImage is chosen.
.IP 2.
Otherwise, the *first encountered* AppImage is chosen.
.RE
.IP •
The chosen AppImage overwrites the existing one in managed/.
.IP •
Other AppImages with the same ID remain in unmanaged/.
.RE
.PP
AppImages already located inside ~/.appimages/managed/ are skipped unless a
higher-priority (#active or first-encountered) AppImage is being moved that
should overwrite it.
.PP
If --all is omitted, PATH must be provided:
.br
    appimg move ~/Downloads/myapp.AppImage
.PP
Matching of .AppImage/.appimage is case-insensitive.
.RE

.TP
\fBupdate\fR
Generate or update .desktop files, icons, symlinks, and permissions for managed AppImages.
If APPNAME is provided, only that app is updated.
.RS
.PP
\fBUSAGE:\fR
.B appimg update [APPNAME]
.PP
\fBBEHAVIOR:\fR
For each application directory in ~/.appimages/managed/ containing an AppImage:
.RS
.IP • 2
Create or update the .desktop file (e.g., org.kde.krita.desktop).
.IP •
Ensure the AppImage file is executable.
.IP •
Create/update a symlink in ~/.local/share/applications/.
.RE
.PP
\fBIcon selection precedence:\fR
.RS
.IP 1. 4
If an icon.* file already exists in the app folder, use it (custom icons are preserved).
.IP 2.
Otherwise extract the AppImage and inspect its embedded .desktop Icon key:
.RS
.IP • 2
Search usr/share/icons and usr/share/pixmaps inside the extracted AppImage for
a matching SVG (case-insensitive).
.IP •
If none, search for a matching PNG; choose the largest.
.IP •
If none, search for a matching XPM.
.IP •
If no matching icon is found in common directories, search the entire extracted
contents for the largest SVG, else largest PNG, else largest XPM.
.RE
.IP 3.
If no icon is found, copy ~/.appimages/placeholder-icon.png.
.RE
.PP
The chosen icon is copied into the app folder as icon.<ext>.
.PP
If the icon was extracted from the AppImage (not a user-provided file):
.RS
.IP • 2
A .noiconkeep marker is created to allow overwriting during future updates.
.RE
.RE

.TP
\fBsetup-all\fR
Perform a complete setup: discover AppImages, move them into managed/, then update them.
.RS
.PP
\fBUSAGE:\fR
.B appimg setup-all
.PP
\fBBEHAVIOR:\fR
.IP • 2
Runs: appimg move --all
.IP •
Runs: appimg update
.IP •
Cleans up outdated .desktop files and broken symlinks.
.IP •
Deletes empty directories in managed/.
.RE

.TP
\fBreset\fR
Reset all managed AppImages by moving them to unmanaged/ and unregistering them.
.RS
.PP
\fBUSAGE:\fR
.B appimg reset
.PP
\fBBEHAVIOR:\fR
For each application in ~/.appimages/managed/:
.RS
.IP • 2
Move its AppImage to ~/.appimages/unmanaged/.
.IP •
Remove its .desktop file from the managed folder.
.IP •
Remove its symlink from ~/.local/share/applications/.
.IP •
Delete the now-empty managed/<APPID>/ directory.
.RE
After the operation, all previously managed AppImages reside in unmanaged/.
.RE

.TP
\fBversion\fR, \fB-v\fR
Display the appimg version.
.RS
.PP
\fBUSAGE:\fR
.B appimg version
.br
.B appimg -v
.RE

.SH NOTES
.RS
.IP • 2
Treat .AppImage and .appimage equivalently.
.IP •
Managed directory: ~/.appimages/managed
.IP •
Unmanaged directory: ~/.appimages/unmanaged
.IP •
Placeholder icon: ~/.appimages/placeholder-icon.png
.RE

.SH AUTHOR
.TP
.B "pmnzt"
.TP
.I "https://github.com/pmnzt"