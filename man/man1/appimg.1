.TH "appimg" 1 "December 2025" "0.5.1" "appimg man page"
.SH NAME
appimg - manage AppImages
.SH SYNOPSIS
appimg [COMMAND] [OPTIONS] [ARGS]
.SH DESCRIPTION
A script to manage, organize, and register AppImage files under
.BR ~/.appimages .

AppImages are organized into two major categories:
.RS
.TP
.B managed/
Contains AppImages that have been organized and registered by appimg.
Each AppImage has its own subdirectory, named after its desktop-file ID.
.TP
.B unmanaged/
Contains AppImages that are newly discovered, reset from managed/, or moved without an update.
.RE

Generated launchers are symlinked into:
.PP
    ~/.local/share/applications/

You may provide a custom icon by placing an icon file (e.g. icon.png, icon.svg)
in a managed application folder and running:
.PP
    appimg update [APPNAME]

If no icon exists, placeholder-icon.png is used.

.SH COMMANDS

.TP
\fBls\fR
List AppImage files. By default searches the user’s home directory.
.RS
.PP
\fBUSAGE:\fR
.B appimg ls [OPTIONS]
.PP
\fBOPTIONS:\fR
.TP
\fB-s DIR\fR
Specify a directory to search.
.PP
\fBOUTPUT:\fR
Prints each AppImage with full path.
.PP
\fBNOTES:\fR
File extension matching is case-insensitive (.AppImage, .appimage).
.RE

.TP
\fBmove\fR
Move AppImage files. This command has two distinct modes: **Managed Import** (default, sorting files into the library structure) and **Simple Move** (if a target directory is provided).
.RS
.PP
\fBUSAGE:\fR
.B appimg move [OPTIONS] [FILE] [TARGET_DIR]
.PP
\fBOPTIONS:\fR
.TP
\fB-s DIR\fR
Specify a directory to search when using \fB--all\fR (defaults to \fB$HOME\fR).
.TP
\fB--all\fR
Process all AppImages found in the search scope.
.PP
\fBBEHAVIOR MODES:\fR
.RS
.TP
\fB1. Simple Move (Target Directory Provided)\fR
If the last argument is a directory, the command performs a standard move operation.
.RS
.IP • 2
The target directory is created if missing.
.IP •
If \fB--all\fR is used, all found AppImages are moved directly to \fBTARGET_DIR/\fR.
.IP •
If a specific file is provided, it is moved to \fBTARGET_DIR/\fR. Files already in the managed directory are skipped.
.RE
.TP
\fB2. Managed Import (Default Mode)\fR
If no target directory is provided, AppImages are imported into the library structure.
.br
\fBRequires\fR a file argument or the \fB--all\fR flag.
.RS
.IP • 2
Creates \fB~/.appimages/managed/\fR and \fB~/.appimages/unmanaged/\fR if missing.
.IP •
Files are grouped by their embedded desktop file ID.
.IP •
\fBPrimary Selection:\fR For each group, the primary file is chosen: \fB#active\fR tag is prioritized, otherwise the first encountered file is used.
.IP •
The Primary AppImage is moved to \fB~/.appimages/managed/<APPID>/\fR. Existing managed versions may be overwritten.
.IP •
All other duplicate AppImages (non-primary versions) are moved to \fB~/.appimages/unmanaged/\fR.
.IP •
AppImages with no detectable ID are also moved to \fB~/.appimages/unmanaged/\fR.
.RE
.RE
.PP
Matching of \fB.AppImage\fR/\fB.appimage\fR is case-insensitive.
.RE

.TP
\fBupdate\fR
Generate or update .desktop files, icons, symlinks, and permissions for managed AppImages.
If \fBAPPNAME\fR is provided, only that specific application is updated.
.RS
.PP
\fBUSAGE:\fR
.B appimg update [APPNAME]
.PP
\fBBEHAVIOR:\fR
For each application directory in \fB~/.appimages/managed/\fR containing an AppImage:
.RS
.IP • 2
Generate or update the .desktop file (e.g., org.kde.krita.desktop).
.IP •
Ensure the AppImage file is executable.
.IP •
Create or update a symlink in \fB~/.local/share/applications/\fR.
.RE
.PP
\fBIcon Selection Precedence:\fR
.RS
.IP 1. 4
\fBExisting File:\fR If an \fBicon.*\fR file (png/svg) already exists in the application folder, it is used.
.IP 2.
\fBInternal Common Paths:\fR The AppImage is extracted to inspect the .desktop \fBIcon\fR key.
.RS
.IP • 2
Search \fBusr/share/icons\fR and \fBusr/share/pixmaps\fR inside the extracted AppImage for a matching SVG (case-insensitive).
.IP •
If none, search those paths for a matching PNG (largest file chosen).
.IP •
If none, search those paths for a matching XPM.
.RE
.IP 3.
\fBGlobal Fallback:\fR If no icon is found in common paths, search the \fBentire\fR extracted contents for the largest SVG, then largest PNG, then largest XPM.
.IP 4.
\fBPlaceholder:\fR If no icon is found, \fB~/.appimages/placeholder-icon.png\fR is copied and used.
.RE
.PP
\fBMarker File:\fR
.br
If the icon was extracted from the AppImage (not user-provided), a \fB.noiconkeep\fR file is created.
This allows the icon to be safely overwritten during future updates or resets.
.RE

.TP
\fBsetup-all\fR
Perform a complete setup: discover AppImages, move them into managed/, then update them.
.RS
.PP
\fBUSAGE:\fR
.B appimg setup-all
.PP
\fBBEHAVIOR:\fR
.IP • 2
Runs: appimg move --all
.IP •
Runs: appimg update
.IP •
Cleans up outdated .desktop files and broken symlinks.
.IP •
Deletes empty directories in managed/.
.RE

.TP
\fBreset\fR
Reset all managed AppImages by moving them to unmanaged/ and unregistering them.
.RS
.PP
\fBUSAGE:\fR
.B appimg reset
.PP
\fBBEHAVIOR:\fR
For each application in ~/.appimages/managed/:
.RS
.IP • 2
Move its AppImage to ~/.appimages/unmanaged/.
.IP •
Remove its .desktop file from the managed folder.
.IP •
Remove its symlink from ~/.local/share/applications/.
.IP •
Delete the now-empty managed/<APPID>/ directory.
.RE
After the operation, all previously managed AppImages reside in unmanaged/.
.RE

.TP
\fBrun\fR
Run an AppImage directly, handling execution permissions and NixOS compatibility.
This command is also used in the .desktop files generated for managed AppImages.
.RS
.PP
\fBUSAGE:\fR
.B appimg run <PATH_TO_APPIMAGE>
.PP
\fBBEHAVIOR:\fR
.IP • 2
Validates that a path is provided and the file exists.
.IP •
Ensures the AppImage is executable (chmod +x).
.IP •
On NixOS:
.RS
.IP • 2
Detects non-FHS environment.
.IP •
If appimage-run is available, launches the AppImage using it.
.IP •
If appimage-run is missing, opens a terminal explaining:
.RS
.IP • 2
NixOS is non-FHS and requires appimage-run.
.IP •
Provides minimal install hint and exits.
.RE
.RE
.IP •
On non-NixOS systems, executes the AppImage directly.
.RE
.PP
\fBNOTES:\fR
.IP • 2
This command does not move, register, or manage the AppImage.
.IP •
Intended for quick execution or testing of AppImages anywhere on the filesystem.
.IP •
Managed AppImages’ .desktop launchers call this command to run the application.
.RE

.TP
\fBopen\fR
Interactively select and launch a managed AppImage.
.RS
.PP
\fBUSAGE:\fR
.B appimg open
.PP
\fBBEHAVIOR:\fR
.IP • 2
Presents an interactive terminal menu; navigate with arrow keys.
.IP •
Press Enter to launch the selected AppImage.
.RE
.PP
\fBNOTES:\fR
.IP • 2
Useful for quickly launching apps from the managed AppImages library.
.IP •
Does not move, update, or otherwise manage AppImages.
.RE

.TP
\fBversion\fR, \fB-v\fR
Display the appimg version.
.RS
.PP
\fBUSAGE:\fR
.B appimg version
.br
.B appimg -v
.RE

.SH NOTES
.RS
.IP • 2
Treat .AppImage and .appimage equivalently.
.IP •
Managed directory: ~/.appimages/managed
.IP •
Unmanaged directory: ~/.appimages/unmanaged
.IP •
Placeholder icon: ~/.appimages/placeholder-icon.png
.RE

.SH AUTHOR
.TP
.B "pmnzt"
.TP
.I "https://github.com/pmnzt"